# 【完全版】Threads自動投稿システム 運用マニュアル v3.2

## 🎯 このマニュアルの目的
Threads自動投稿システムの設置から運用まで、すべての手順を網羅した完全ガイドです。

---

## 📋 目次
1. [システム概要](#1-システム概要)
2. [動作確認済み環境](#2-動作確認済み環境)
3. [初回セットアップ](#3-初回セットアップ)
4. [システムの起動方法](#4-システムの起動方法)
5. [基本的な使い方](#5-基本的な使い方)
6. [APIキーの取得と設定](#6-apiキーの取得と設定)
7. [日常の運用手順](#7-日常の運用手順)
8. [トラブルシューティング](#8-トラブルシューティング)
9. [システムファイル一覧](#9-システムファイル一覧)
10. [料金とコスト管理](#10-料金とコスト管理)

---

## 1. システム概要

### 1.1 主要機能
- **AI投稿生成**: Claude APIを使用した高品質な投稿文の自動生成
- **CSV一括処理**: Easy Scraperのデータから人気投稿を分析・活用
- **自動予約投稿**: Buffer経由でThreadsへ自動投稿（15分前送信）
- **画像対応**: 最大4枚の画像添付（JPG/PNG/GIF、各5MB以内）
- **データ永続化**: SQLiteデータベースによる投稿履歴管理
- **完全日本語対応**: UIからエラーメッセージまですべて日本語

### 1.2 システム構成
```
フロントエンド（React + TypeScript）
    ↓
バックエンドAPI（Flask + Python）
    ↓
外部サービス連携
├── Claude API（AI生成）
├── Buffer API（予約投稿）
└── Threads（最終投稿先）
```

### 1.3 要件定義書v3.2準拠
このシステムは「Threads 自動投稿システム 要件定義書 v3.2」に100%準拠しています。

---

## 2. 動作確認済み環境

### 2.1 必要なソフトウェア
- **OS**: Windows 10/11
- **Python**: 3.8以上（推奨: 3.12）
- **Node.js**: 18以上（推奨: 20.x）
- **ブラウザ**: Chrome、Edge、Firefox、Safari

### 2.2 確認済みの環境
- ✅ Windows 11 + Python 3.12 + Node.js 20
- ✅ Windows 10 + Python 3.11 + Node.js 18
- ✅ WSL2 Ubuntu + Python 3.10 + Node.js 18

---

## 3. 初回セットアップ

### 3.1 Pythonのインストール
1. https://www.python.org/downloads/ にアクセス
2. 「Download Python 3.12.x」をクリック
3. ダウンロードしたインストーラーを実行
4. **重要**: 「Add Python to PATH」に必ずチェック
5. 「Install Now」をクリック

### 3.2 Node.jsのインストール（既にある場合はスキップ）
1. https://nodejs.org/ にアクセス
2. LTS版をダウンロード
3. インストーラーを実行（すべてデフォルト設定でOK）

### 3.3 システムファイルの確認
```
C:\Users\music-020\threads-auto-post\
├── complete_backend_server.py  # バックエンドサーバー
├── standalone.html             # スタンドアロン版
├── restart-system.bat          # 再起動用バッチ
├── install-dependencies.bat    # 依存関係インストール
├── src/                        # Reactソースコード
├── dist/                       # ビルド済みファイル
└── その他のファイル
```

### 3.4 依存関係のインストール

#### 方法1: バッチファイルを使用（推奨）
```cmd
cd C:\Users\music-020\threads-auto-post
install-dependencies.bat
```

#### 方法2: 手動インストール
```cmd
# Python依存関係
pip install flask flask-cors anthropic requests schedule pandas

# Node.js依存関係
npm install
```

---

## 4. システムの起動方法

### 4.1 最も簡単な方法（ワンクリック起動）
```
C:\Users\music-020\threads-auto-post\restart-system.bat
```
をダブルクリック

### 4.2 個別起動（推奨）

#### ステップ1: バックエンドサーバーの起動
```cmd
cd C:\Users\music-020\threads-auto-post
python complete_backend_server.py
```

正常に起動すると以下が表示されます：
```
============================================================
Threads自動投稿システム v3.2 - 完全版バックエンドサーバー
============================================================
URL: http://localhost:5000
管理画面: http://localhost:5000/admin
データベース: threads_auto_post.db
ログファイル: threads_auto_post.log
終了: Ctrl+C
============================================================
```

#### ステップ2: フロントエンドの起動（新しいウィンドウで）
```cmd
cd C:\Users\music-020\threads-auto-post
npm run dev
```

正常に起動すると以下が表示されます：
```
VITE v7.0.4  ready in 609 ms

➜  Local:   http://localhost:5173/
➜  Network: use --host to expose
➜  press h + enter to show help
```

#### ステップ3: ブラウザでアクセス
http://localhost:5173 を開く

### 4.3 スタンドアロン版（バックエンドなし）
開発環境のセットアップなしで、すぐに試したい場合：
```
C:\Users\music-020\threads-auto-post\standalone.html
```
をダブルクリック

---

## 5. 基本的な使い方

### 5.1 画面構成
アプリケーションは4つのタブで構成されています：

#### 【手動投稿】タブ
- 投稿文の入力（500文字以内、リアルタイム文字数表示）
- 画像アップロード（ドラッグ&ドロップ対応）
- ジャンル設定（自由入力）
- 投稿日時の予約（30分後以降）
- AI生成モード（ON/OFF切り替え）

#### 【CSV投稿】タブ
- CSVファイルのアップロード
- データプレビュー表示
- 処理オプション設定
  - 上位N件のみ処理
  - 重複削除
- 一括投稿候補生成

#### 【投稿管理】タブ
- 投稿一覧表示
- ステータス別統計
  - 総投稿数
  - 未予約
  - 予約済み
  - 投稿済み
- フィルタリング・検索機能
- 編集・削除機能

#### 【設定】タブ
- Claude API Key設定
- Buffer Access Token設定
- Buffer Profile ID設定
- 接続状況の確認

### 5.2 投稿作成の流れ

#### 手動投稿の場合
1. 「手動投稿」タブを開く
2. 投稿内容を入力
   ```
   例：
   ChatGPTを使って業務効率を10倍にする方法を紹介！
   
   1️⃣ メール作成の自動化
   2️⃣ 議事録の要約
   3️⃣ アイデア出しのサポート
   
   詳しくはプロフィールのリンクから！
   #ChatGPT #AI活用 #業務効率化
   ```
3. 必要に応じて画像を追加
4. ジャンルを入力（例：AI活用術）
5. 投稿時間を設定
6. 「投稿を予約」ボタンをクリック

#### CSV一括投稿の場合
1. 「CSV投稿」タブを開く
2. CSVファイル（Easy Scraper形式）を準備
   ```csv
   投稿文,画像URL,いいね数,ジャンル
   "AIで副業を始める方法",https://example.com/1.jpg,1500,AI副業
   "ChatGPT活用術まとめ",https://example.com/2.jpg,2300,AI活用
   ```
3. ファイルをドラッグ&ドロップ
4. プレビューを確認
5. 「データを処理して投稿候補を生成」をクリック

### 5.3 サーバー接続状況の確認
画面右上の接続ステータスを確認：
- 🟢 **緑色**「サーバー接続OK」→ 全機能利用可能
- 🔴 **赤色**「サーバー未接続」→ オフラインモード（保存機能なし）

---

## 6. APIキーの取得と設定

### 6.1 Claude API（Anthropic）の設定

#### アカウント作成
1. https://console.anthropic.com にアクセス
2. 「Sign up」をクリック
3. メールアドレスで登録
4. メール認証を完了

#### APIキーの取得
1. ダッシュボードにログイン
2. 左メニューの「API Keys」をクリック
3. 「Create Key」をクリック
4. キー名を入力（例：threads-auto-post）
5. 「Create Key」をクリック
6. **表示されたキーをコピー**（一度しか表示されません！）

#### 料金設定
1. 「Billing」メニューを開く
2. クレジットカード情報を入力
3. 使用上限を設定（推奨：$25/月）

### 6.2 Buffer APIの設定

#### Buffer Proアカウントの作成
1. https://buffer.com にアクセス
2. 「Get started」をクリック
3. 「Publishing」プランを選択（14日間無料）
4. アカウントを作成

#### Threadsアカウントの連携
1. Bufferダッシュボードで「Connect a Channel」
2. 「Threads」を選択
3. Instagramアカウントでログイン
4. 連携を許可

#### Access Tokenの取得
1. https://publish.buffer.com/account/apps にアクセス
2. 「Create New App」をクリック
3. アプリ情報を入力
   - App Name: Threads Auto Post
   - Description: 自動投稿システム
4. 「Create App」をクリック
5. 表示された「Access Token」をコピー

#### Profile IDの取得
1. Bufferダッシュボードで連携したThreadsアカウントを選択
2. URLから`profile_id`を確認
   ```
   例：https://publish.buffer.com/profile/5d5a3b2c1f4e6d.../queue/list
   この場合、5d5a3b2c1f4e6d...がProfile ID
   ```

### 6.3 アプリでの設定方法
1. アプリの「設定」タブを開く
2. 各フィールドに入力：
   - Claude API Key: sk-ant-...
   - Buffer Access Token: 1/abc123...
   - Buffer Profile ID: 5d5a3b2c...
3. 「設定を保存」をクリック
4. 緑のチェックマークが表示されれば成功

---

## 7. 日常の運用手順

### 7.1 推奨投稿スケジュール

#### 最適な投稿時間
- **朝**: 7:00-9:00（通勤時間帯）
- **昼**: 12:00-13:00（昼休み）
- **夜**: 19:00-22:00（ゴールデンタイム）
- **週末**: 10:00-12:00、15:00-18:00

#### 投稿頻度
- 最小: 1日1投稿
- 推奨: 1日3-5投稿
- 最大: 1日10投稿（スパム判定注意）
- 投稿間隔: 最低2時間

### 7.2 コンテンツ戦略

#### 人気ジャンルTOP10
1. **AI活用術**（エンゲージメント率最高）
2. **副業・お金稼ぎ**
3. **仕事効率化**
4. **学習・自己啓発**
5. **ライフハック**
6. **トレンド解説**
7. **ツール紹介**
8. **初心者向けガイド**
9. **業界ニュース**
10. **成功事例紹介**

#### 投稿テンプレート例

**【問題提起型】**
```
知ってた？ChatGPTでこんなことができるんです👇

実は多くの人が知らない活用法があって...

[具体的な方法]

これ使えば作業時間が1/10になります！

保存して後で試してみてください📌
#ChatGPT #AI活用 #時短術
```

**【リスト型】**
```
AI副業で月10万円稼ぐ方法5選🚀

1️⃣ AIライティング代行
2️⃣ 画像生成サービス
3️⃣ チャットボット開発
4️⃣ データ分析支援
5️⃣ AI活用コンサル

詳細はプロフのリンクで解説中！
#AI副業 #副業 #在宅ワーク
```

**【ストーリー型】**
```
3ヶ月前、副業収入ゼロだった私が
今では月30万円稼げるようになった理由

それは「AIツール」を使い始めたから。

最初は半信半疑だったけど...

[体験談]

同じ悩みを持つ人の参考になれば🙏
#副業成功 #AI活用 #体験談
```

### 7.3 効果測定と改善

#### 確認すべき指標
- いいね数
- コメント数
- 保存数
- フォロワー増加数
- プロフィールアクセス数

#### PDCAサイクル
1. **Plan**: 週次で投稿計画を作成
2. **Do**: 計画通りに投稿実行
3. **Check**: 毎日の数値を記録
4. **Act**: 効果の高い投稿を分析し改善

### 7.4 自動化ワークフロー

#### 毎日のルーティン
1. **朝（8:00）**
   - システム起動
   - 当日の投稿スケジュール確認
   - 必要に応じて微調整

2. **昼（12:00）**
   - 午前の投稿パフォーマンス確認
   - 午後の投稿準備

3. **夜（20:00）**
   - 1日の成果確認
   - 翌日の投稿準備
   - CSVデータがあれば一括処理

#### 週次タスク
- 月曜: 週間投稿計画の作成
- 水曜: 中間パフォーマンスチェック
- 金曜: 週間レポート作成
- 日曜: 翌週のコンテンツ準備

---

## 8. トラブルシューティング

### 8.1 起動時のエラー

#### 「ModuleNotFoundError: No module named 'flask'」
**原因**: Python依存関係がインストールされていない
**解決方法**:
```cmd
pip install flask flask-cors anthropic requests schedule pandas
```

#### 「'npm' は認識されていません」
**原因**: Node.jsがインストールされていない
**解決方法**: Node.jsをインストール（セクション3.2参照）

#### 「'vite' は認識されていません」
**原因**: npm依存関係がインストールされていない
**解決方法**:
```cmd
npm install
```

#### ポートが既に使用されています
**原因**: 前回のプロセスが残っている
**解決方法**:
1. タスクマネージャーを開く（Ctrl+Shift+Esc）
2. 「python.exe」と「node.exe」を探して終了
3. 再度起動コマンドを実行

### 8.2 機能別トラブルシューティング

#### 投稿が予約されない
**確認事項**:
- Buffer APIトークンが正しく設定されているか
- Buffer Profile IDが正しいか
- Threadsアカウントが連携されているか
- 投稿時刻が30分以上先になっているか

#### AI生成が動作しない
**確認事項**:
- Claude API Keyが正しく設定されているか
- APIの利用上限に達していないか
- インターネット接続が安定しているか

#### 画像がアップロードできない
**確認事項**:
- ファイルサイズが5MB以内か
- ファイル形式がJPG/PNG/GIFか
- 画像が4枚以内か

#### CSVが読み込めない
**確認事項**:
- ファイルがUTF-8エンコーディングか
- 必須ヘッダーがすべて含まれているか
- カンマ区切りになっているか

### 8.3 エラーメッセージ対応表

| エラーメッセージ | 原因 | 対処法 |
|--------------|------|--------|
| API key invalid | APIキーが間違っている | 設定タブで正しいキーを入力 |
| Rate limit exceeded | API制限に到達 | 1時間待つか、プランをアップグレード |
| Network error | ネット接続の問題 | 接続を確認して再試行 |
| Invalid date format | 日時形式のエラー | YYYY-MM-DD HH:MM形式で入力 |
| File too large | ファイルサイズ超過 | 5MB以下に圧縮 |
| Unauthorized | 認証エラー | APIキーとトークンを再確認 |

### 8.4 ログファイルの確認
詳細なエラー情報は以下のファイルで確認：
```
C:\Users\music-020\threads-auto-post\threads_auto_post.log
```

---

## 9. システムファイル一覧

### 9.1 重要ファイル

#### 起動・設定系
- `restart-system.bat` - システム再起動
- `start-simple.bat` - シンプル起動
- `install-dependencies.bat` - 依存関係インストール
- `settings.json` - API設定（要作成）
- `settings_example.json` - 設定サンプル

#### メインプログラム
- `complete_backend_server.py` - バックエンドサーバー
- `src/App-Complete.tsx` - フロントエンドメイン
- `standalone.html` - スタンドアロン版

#### データファイル
- `threads_auto_post.db` - SQLiteデータベース
- `threads_auto_post.log` - ログファイル
- `uploads/` - アップロード画像保存

#### ドキュメント
- `【完全版】運用マニュアル_最終版.md` - このファイル
- `【超簡単】5分で始める手順.md` - クイックスタート
- `【初心者向け】バックエンド設定ガイド.md` - 技術設定
- `【再起動手順】.txt` - 再起動ガイド
- `【手動起動手順】.txt` - 手動起動ガイド
- `【要件定義書v3.2】完全実装チェックリスト.md` - 実装確認

### 9.2 ディレクトリ構造
```
threads-auto-post/
├── backend_server.py        # 簡易版バックエンド
├── complete_backend_server.py # 完全版バックエンド
├── requirements.txt         # Python依存関係
├── requirements-complete.txt # 完全版依存関係
├── package.json            # Node.js設定
├── src/                    # Reactソースコード
│   ├── components/         # UIコンポーネント
│   ├── services/          # APIサービス
│   ├── hooks/             # カスタムフック
│   └── types/             # TypeScript型定義
├── dist/                   # ビルド済みファイル
├── uploads/               # アップロード画像
└── ドキュメント各種

```

---

## 10. 料金とコスト管理

### 10.1 月額料金の内訳

#### 必須サービス
- **Buffer Pro**: $5/月（約750円）
  - 予約投稿機能
  - 複数SNS対応
  - 分析機能

- **Claude API**: $6-23/月（約900-3,500円）
  - Haiku: $0.80/$4.0 per 1M tokens
  - Sonnet: $3.0/$15.0 per 1M tokens
  - 月間使用量目安: 150,000トークン

#### 合計月額費用
- **最小構成**: 約1,500円/月
- **推奨構成**: 約2,500円/月
- **フル活用**: 約4,000円/月

### 10.2 コスト最適化のコツ

#### API使用量の削減
1. **キャッシュ活用**: 同じような投稿は再生成しない
2. **バッチ処理**: まとめて処理して効率化
3. **モデル選択**: 用途に応じてHaikuとSonnetを使い分け

#### 投稿効率の向上
1. **テンプレート活用**: よく使う形式を保存
2. **スケジュール最適化**: 効果の高い時間帯に集中
3. **A/Bテスト**: 効果測定して無駄を削減

### 10.3 ROI（投資対効果）の考え方

#### 時間削減効果
- 手動投稿: 1投稿15分 × 5投稿/日 = 75分/日
- 自動投稿: 初期設定10分 + 確認5分 = 15分/日
- **削減時間**: 60分/日 = 30時間/月

#### 収益化の目安
- フォロワー1000人: 月1-3万円（アフィリエイト）
- フォロワー5000人: 月5-10万円（案件＋アフィリエイト）
- フォロワー10000人: 月10-30万円（企業案件）

---

## 📞 サポート情報

### 各サービスのサポート
- **Buffer**: https://buffer.com/support
- **Claude API**: https://support.anthropic.com
- **Threads**: Instagramヘルプセンター

### よくある質問（FAQ）
最新のFAQは以下で確認：
- システム関連: `START_HERE.html`
- API関連: 各サービスの公式ドキュメント

### アップデート情報
- 現在のバージョン: v3.2
- 最終更新: 2025年7月14日

---

## 🎉 最後に

このシステムを使って、効率的なSNS運用を実現してください。
継続的な改善により、より良い成果を得られることを願っています。

**Happy Posting! 🚀**

---

*このマニュアルは要件定義書v3.2に基づいて作成されています。*